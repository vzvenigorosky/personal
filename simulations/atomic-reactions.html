<!DOCTYPE html>

<html lang="en">

<head>

Â  Â  <meta charset="UTF-8">

Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">

Â  Â  <title>Atomic Simulation</title>

Â  Â  <script src="https://cdn.tailwindcss.com"></script>

Â  Â  <link rel="preconnect" href="https://fonts.googleapis.com">

Â  Â  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

Â  Â  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

Â  Â  <style>

Â  Â  Â  Â  body {

Â  Â  Â  Â  Â  Â  font-family: 'Inter', sans-serif;

Â  Â  Â  Â  Â  Â  overflow: hidden;

Â  Â  Â  Â  }

Â  Â  Â  Â  input[type="number"]::-webkit-inner-spin-button,

Â  Â  Â  Â  input[type="number"]::-webkit-outer-spin-button {

Â  Â  Â  Â  Â  Â  -webkit-appearance: none;

Â  Â  Â  Â  Â  Â  margin: 0;

Â  Â  Â  Â  }

Â  Â  Â  Â  input[type="number"] {

Â  Â  Â  Â  Â  Â  -moz-appearance: textfield;

Â  Â  Â  Â  }

Â  Â  </style>

</head>

<body class="bg-gray-900 text-white flex flex-col items-center justify-center h-screen antialiased">



Â  Â  <div class="w-full max-w-7xl mx-auto p-4 flex flex-col lg:flex-row gap-4 h-full">



Â  Â  Â  Â  <!-- Simulation Canvas -->

Â  Â  Â  Â  <div class="flex-grow w-full lg:w-3/4 h-2/3 lg:h-full bg-gray-800 rounded-2xl shadow-2xl overflow-hidden relative">

Â  Â  Â  Â  Â  Â  <canvas id="simulationCanvas"></canvas>

Â  Â  Â  Â  Â  Â  <div id="loading" class="absolute inset-0 bg-gray-800 bg-opacity-80 flex items-center justify-center z-20">

Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-2xl font-medium">Initializing Simulation...</p>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <!-- Controls and Info Panel -->

Â  Â  Â  Â  <div class="w-full lg:w-1/4 h-1/3 lg:h-full flex flex-col gap-4">

Â  Â  Â  Â  Â  Â  <div class="bg-gray-800 p-6 rounded-2xl shadow-lg flex-grow flex flex-col overflow-y-auto">

Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="text-2xl font-bold mb-1 text-indigo-300">Atomic Controls</h1>

Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-gray-400 mb-6">Adjust conditions to observe molecular formation.</p>



Â  Â  Â  Â  Â  Â  Â  Â  <!-- Temperature Control -->

Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-6">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="temperature" class="block mb-2 text-sm font-medium text-gray-300">Temperature</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-4">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-indigo-400 text-lg">â„ï¸</span>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input id="temperature" type="range" min="1" max="1000" value="300" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-red-400 text-lg">ğŸ”¥</span>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center mt-2 text-gray-400">Value: <span id="tempValue">300</span> K</div>

Â  Â  Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  Â  Â  <!-- Pressure Control -->

Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-6">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="pressure" class="block mb-2 text-sm font-medium text-gray-300">Pressure</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="flex items-center gap-4">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-gray-400 text-lg">ğŸ’¨</span>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input id="pressure" type="range" min="1" max="100" value="20" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-gray-400 text-lg">ğŸ—œï¸</span>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-center mt-2 text-gray-400">Value: <span id="pressureValue">20</span> atm</div>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <!-- Atom Count Controls -->

Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-6 pt-6 border-t border-gray-700">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h2 class="text-xl font-bold mb-3 text-indigo-300">Initial Atom Counts</h2>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="space-y-3">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between items-center">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="hCount" class="font-medium text-gray-300">Hydrogen:</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input id="hCount" type="number" value="40" min="0" max="100" class="bg-gray-700 w-20 text-center rounded-md py-1 border border-gray-600 focus:ring-2 focus:ring-indigo-500 focus:outline-none">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="flex justify-between items-center">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="oCount" class="font-medium text-gray-300">Oxygen:</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input id="oCount" type="number" value="15" min="0" max="50" class="bg-gray-700 w-20 text-center rounded-md py-1 border border-gray-600 focus:ring-2 focus:ring-indigo-500 focus:outline-none">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="flex justify-between items-center">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="cCount" class="font-medium text-gray-300">Carbon:</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input id="cCount" type="number" value="10" min="0" max="50" class="bg-gray-700 w-20 text-center rounded-md py-1 border border-gray-600 focus:ring-2 focus:ring-indigo-500 focus:outline-none">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>

Â  Â  Â  Â  Â  Â  Â  Â  </div>





Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="mt-auto pt-6 border-t border-gray-700">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-xl font-bold mb-3 text-indigo-300">System State</h2>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="moleculeInfo" class="space-y-2 text-sm text-gray-300">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Molecule counts will be injected here -->

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â <button id="resetButton" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-xl transition duration-300 shadow-md flex-shrink-0">

Â  Â  Â  Â  Â  Â  Â  Â  Reset Simulation

Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  </div>



Â  Â  </div>



Â  Â  <script>

Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {

Â  Â  Â  Â  Â  Â  const canvas = document.getElementById('simulationCanvas');

Â  Â  Â  Â  Â  Â  const ctx = canvas.getContext('2d');

Â  Â  Â  Â  Â  Â  const loadingIndicator = document.getElementById('loading');

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  let parentContainer = canvas.parentElement;

Â  Â  Â  Â  Â  Â  let animationFrameId;

Â  Â  Â  Â  Â  Â  let lastUpdateTime = 0;

Â  Â  Â  Â  Â  Â  let time = 0;



Â  Â  Â  Â  Â  Â  // --- CONFIGURATION ---

Â  Â  Â  Â  Â  Â  const ATOM_CONFIG = {

Â  Â  Â  Â  Â  Â  Â  Â  'H': { radius: 8, color: 'rgba(239, 239, 239, 0.9)', mass: 1, maxBonds: 1 },

Â  Â  Â  Â  Â  Â  Â  Â  'O': { radius: 12, color: 'rgba(239, 68, 68, 0.9)', mass: 16, maxBonds: 2 },

Â  Â  Â  Â  Â  Â  Â  Â  'C': { radius: 14, color: 'rgba(74, 85, 104, 0.9)', mass: 12, maxBonds: 4 }

Â  Â  Â  Â  Â  Â  };



Â  Â  Â  Â  Â  Â  const BOND_LENGTH = 1.2; // Multiplier for sum of radii

Â  Â  Â  Â  Â  Â  const REPULSION_FORCE = 0.5;



Â  Â  Â  Â  Â  Â  // --- Simulation State ---

Â  Â  Â  Â  Â  Â  let atoms = [];

Â  Â  Â  Â  Â  Â  let temperature = 300;

Â  Â  Â  Â  Â  Â  let pressure = 20;



Â  Â  Â  Â  Â  Â  // --- UI Elements ---

Â  Â  Â  Â  Â  Â  const tempSlider = document.getElementById('temperature');

Â  Â  Â  Â  Â  Â  const pressureSlider = document.getElementById('pressure');

Â  Â  Â  Â  Â  Â  const tempValue = document.getElementById('tempValue');

Â  Â  Â  Â  Â  Â  const pressureValue = document.getElementById('pressureValue');

Â  Â  Â  Â  Â  Â  const hCountInput = document.getElementById('hCount');

Â  Â  Â  Â  Â  Â  const oCountInput = document.getElementById('oCount');

Â  Â  Â  Â  Â  Â  const cCountInput = document.getElementById('cCount');

Â  Â  Â  Â  Â  Â  const moleculeInfo = document.getElementById('moleculeInfo');

Â  Â  Â  Â  Â  Â  const resetButton = document.getElementById('resetButton');



Â  Â  Â  Â  Â  Â  // --- CLASSES ---



Â  Â  Â  Â  Â  Â  /**

Â  Â  Â  Â  Â  Â  Â * Represents a single atom in the simulation.

Â  Â  Â  Â  Â  Â  Â */

Â  Â  Â  Â  Â  Â  class Atom {

Â  Â  Â  Â  Â  Â  Â  Â  constructor(x, y, type) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.x = x;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.y = y;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.type = type;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.config = ATOM_CONFIG[type];

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.radius = this.config.radius;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.color = this.config.color;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.mass = this.config.mass;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.maxBonds = this.config.maxBonds;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.vx = (Math.random() - 0.5) * 2;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.vy = (Math.random() - 0.5) * 2;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.bonds = []; // Stores references to bonded atoms

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.id = Math.random();

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  getBondsCount() {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return this.bonds.length;

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  canBond() {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return this.getBondsCount() < this.maxBonds;

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  isBondedTo(otherAtom) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return this.bonds.some(bond => bond.id === otherAtom.id);

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  addBond(otherAtom) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (this.canBond() && otherAtom.canBond() && !this.isBondedTo(otherAtom)) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.bonds.push(otherAtom);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  otherAtom.bonds.push(this);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return true;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return false;

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  removeBond(otherAtom) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const thisIndex = this.bonds.findIndex(bond => bond.id === otherAtom.id);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (thisIndex > -1) this.bonds.splice(thisIndex, 1);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const otherIndex = otherAtom.bonds.findIndex(bond => bond.id === this.id);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (otherIndex > -1) otherAtom.bonds.splice(otherIndex, 1);

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  updatePosition(temp, press) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Thermal motion (jiggle)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const thermalEnergy = (temp / 1000) * 0.3; // Adjusted for new temp range

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.vx += (Math.random() - 0.5) * thermalEnergy;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.vy += (Math.random() - 0.5) * thermalEnergy;



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Pressure influence

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const pressureFactor = 1 + (press / 100) * 0.5;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.x += this.vx * pressureFactor;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.y += this.vy * pressureFactor;



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Wall collisions

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (this.x < this.radius || this.x > canvas.width - this.radius) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.vx *= -0.9;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.x = Math.max(this.radius, Math.min(canvas.width - this.radius, this.x));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (this.y < this.radius || this.y > canvas.height - this.radius) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.vy *= -0.9;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â this.y = Math.max(this.radius, Math.min(canvas.height - this.radius, this.y));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Dampen velocity over time to prevent runaway speeds

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.vx *= 0.99;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  this.vy *= 0.99;

Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  draw(ctx, time) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Draw atom body

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.beginPath();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillStyle = this.color;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.shadowColor = this.color;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.shadowBlur = 10;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fill();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.shadowBlur = 0;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Draw open orbitals

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const availableBonds = this.maxBonds - this.getBondsCount();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (availableBonds > 0) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const orbitalRadius = this.radius + 5;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const baseAngle = time * 0.002;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillStyle = 'rgba(199, 210, 254, 0.8)'; // Indigo-200

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 0; i < availableBonds; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const angle = baseAngle + (i * (2 * Math.PI) / availableBonds);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const ox = this.x + orbitalRadius * Math.cos(angle);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const oy = this.y + orbitalRadius * Math.sin(angle);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.beginPath();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.arc(ox, oy, 2, 0, 2 * Math.PI);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fill();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Draw atom symbol

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillStyle = '#111827'; // Dark text for contrast on bright atoms

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.font = `bold ${this.radius}px Inter`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.textAlign = 'center';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.textBaseline = 'middle';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillText(this.type, this.x, this.y);

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  // --- SIMULATION LOGIC ---



Â  Â  Â  Â  Â  Â  function init() {

Â  Â  Â  Â  Â  Â  Â  Â  resizeCanvas();

Â  Â  Â  Â  Â  Â  Â  Â  atoms = [];

Â  Â  Â  Â  Â  Â  Â  Â  const initialCounts = {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'H': parseInt(hCountInput.value) || 0,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'O': parseInt(oCountInput.value) || 0,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'C': parseInt(cCountInput.value) || 0,

Â  Â  Â  Â  Â  Â  Â  Â  };



Â  Â  Â  Â  Â  Â  Â  Â  for (const [type, count] of Object.entries(initialCounts)) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 0; i < count; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const x = Math.random() * (canvas.width - 40) + 20;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const y = Math.random() * (canvas.height - 40) + 20;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  atoms.push(new Atom(x, y, type));

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  // Set initial slider values from state

Â  Â  Â  Â  Â  Â  Â  Â  tempSlider.value = temperature;

Â  Â  Â  Â  Â  Â  Â  Â  tempValue.textContent = temperature;

Â  Â  Â  Â  Â  Â  Â  Â  pressureSlider.value = pressure;

Â  Â  Â  Â  Â  Â  Â  Â  pressureValue.textContent = pressure;

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  loadingIndicator.style.display = 'none';

Â  Â  Â  Â  Â  Â  Â  Â  if (animationFrameId) cancelAnimationFrame(animationFrameId);

Â  Â  Â  Â  Â  Â  Â  Â  lastUpdateTime = performance.now();

Â  Â  Â  Â  Â  Â  Â  Â  animate();

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  function handleInteractions() {

Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 0; i < atoms.length; i++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  for (let j = i + 1; j < atoms.length; j++) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const atomA = atoms[i];

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const atomB = atoms[j];



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dx = atomB.x - atomA.x;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dy = atomB.y - atomA.y;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const distance = Math.sqrt(dx * dx + dy * dy);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const totalRadius = atomA.radius + atomB.radius;



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (distance < totalRadius) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const overlap = totalRadius - distance;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const angle = Math.atan2(dy, dx);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const force = overlap * REPULSION_FORCE;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  atomA.vx -= Math.cos(angle) * force / atomA.mass;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  atomA.vy -= Math.sin(angle) * force / atomA.mass;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  atomB.vx += Math.cos(angle) * force / atomB.mass;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  atomB.vy += Math.sin(angle) * force / atomB.mass;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (atomA.isBondedTo(atomB)) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const idealDist = (atomA.radius + atomB.radius) * 0.8;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const stretch = distance - idealDist;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const springForce = stretch * 0.01;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const angle = Math.atan2(dy, dx);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  atomA.vx += Math.cos(angle) * springForce / atomA.mass;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  atomA.vy += Math.sin(angle) * springForce / atomA.mass;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  atomB.vx -= Math.cos(angle) * springForce / atomB.mass;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  atomB.vy -= Math.sin(angle) * springForce / atomB.mass;



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const breakProbability = (temperature / 1000) * 0.0015;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (Math.random() < breakProbability) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  atomA.removeBond(atomB);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (distance < totalRadius * BOND_LENGTH) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (atomA.canBond() && atomB.canBond()) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const bondProbability = (1 - (temperature / 1200)) * (1 + pressure / 200);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (Math.random() < bondProbability) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  atomA.addBond(atomB);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  function updateAndDraw(currentTime) {

Â  Â  Â  Â  Â  Â  Â  Â  const deltaTime = currentTime - lastUpdateTime;

Â  Â  Â  Â  Â  Â  Â  Â  lastUpdateTime = currentTime;

Â  Â  Â  Â  Â  Â  Â  Â  time += deltaTime;



Â  Â  Â  Â  Â  Â  Â  Â  ctx.clearRect(0, 0, canvas.width, canvas.height);

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  handleInteractions();



Â  Â  Â  Â  Â  Â  Â  Â  ctx.strokeStyle = 'rgba(167, 139, 250, 0.6)';

Â  Â  Â  Â  Â  Â  Â  Â  ctx.lineWidth = 3;

Â  Â  Â  Â  Â  Â  Â  Â  const drawnBonds = new Set();

Â  Â  Â  Â  Â  Â  Â  Â  atoms.forEach(atom => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  atom.bonds.forEach(bondedAtom => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const bondId1 = `${atom.id}-${bondedAtom.id}`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const bondId2 = `${bondedAtom.id}-${atom.id}`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!drawnBonds.has(bondId1) && !drawnBonds.has(bondId2)) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.beginPath();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.moveTo(atom.x, atom.y);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.lineTo(bondedAtom.x, bondedAtom.y);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.stroke();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  drawnBonds.add(bondId1);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  });



Â  Â  Â  Â  Â  Â  Â  Â  atoms.forEach(atom => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  atom.updatePosition(temperature, pressure);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  atom.draw(ctx, time);

Â  Â  Â  Â  Â  Â  Â  Â  });



Â  Â  Â  Â  Â  Â  Â  Â  updateInfoPanel();

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function animate(currentTime) {

Â  Â  Â  Â  Â  Â  Â  Â  updateAndDraw(currentTime);

Â  Â  Â  Â  Â  Â  Â  Â  animationFrameId = requestAnimationFrame(animate);

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function updateInfoPanel() {

Â  Â  Â  Â  Â  Â  Â  Â  const molecules = { 'Hâ‚‚O': 0, 'COâ‚‚': 0, 'CHâ‚„': 0, 'Oâ‚‚': 0, 'Other': 0 };

Â  Â  Â  Â  Â  Â  Â  Â  const checkedAtoms = new Set();



Â  Â  Â  Â  Â  Â  Â  Â  atoms.forEach(atom => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (checkedAtoms.has(atom.id) || atom.getBondsCount() === 0) return;



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const connectedComponent = getConnectedComponent(atom);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  connectedComponent.forEach(a => checkedAtoms.add(a.id));



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const formula = getMolecularFormula(connectedComponent);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (molecules.hasOwnProperty(formula)) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  molecules[formula]++;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (connectedComponent.length > 1) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  molecules['Other']++;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  });



Â  Â  Â  Â  Â  Â  Â  Â  moleculeInfo.innerHTML = `

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between items-center"><span class="font-semibold text-blue-300">Water (Hâ‚‚O):</span> <span class="font-mono bg-gray-700 px-2 py-1 rounded">${molecules['Hâ‚‚O']}</span></div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between items-center"><span class="font-semibold text-gray-300">Carbon Dioxide (COâ‚‚):</span> <span class="font-mono bg-gray-700 px-2 py-1 rounded">${molecules['COâ‚‚']}</span></div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between items-center"><span class="font-semibold text-green-300">Methane (CHâ‚„):</span> <span class="font-mono bg-gray-700 px-2 py-1 rounded">${molecules['CHâ‚„']}</span></div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between items-center"><span class="font-semibold text-red-300">Oxygen (Oâ‚‚):</span> <span class="font-mono bg-gray-700 px-2 py-1 rounded">${molecules['Oâ‚‚']}</span></div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between items-center"><span class="font-semibold text-purple-300">Other Molecules:</span> <span class="font-mono bg-gray-700 px-2 py-1 rounded">${molecules['Other']}</span></div>

Â  Â  Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function getConnectedComponent(startAtom) {

Â  Â  Â  Â  Â  Â  Â  Â  const component = [];

Â  Â  Â  Â  Â  Â  Â  Â  const queue = [startAtom];

Â  Â  Â  Â  Â  Â  Â  Â  const visited = new Set([startAtom.id]);

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  while(queue.length > 0) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const current = queue.shift();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  component.push(current);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  current.bonds.forEach(neighbor => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!visited.has(neighbor.id)) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  visited.add(neighbor.id);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  queue.push(neighbor);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  return component;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function getMolecularFormula(component) {

Â  Â  Â  Â  Â  Â  Â  Â  const counts = {};

Â  Â  Â  Â  Â  Â  Â  Â  component.forEach(atom => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  counts[atom.type] = (counts[atom.type] || 0) + 1;

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  // Use a more robust subscript mapping

Â  Â  Â  Â  Â  Â  Â  Â  const toSubscript = (n) => String(n).split('').map(char => 'â‚€â‚â‚‚â‚ƒâ‚„â‚…â‚†â‚‡â‚ˆâ‚‰'[char]).join('');



Â  Â  Â  Â  Â  Â  Â  Â  const parts = ['C', 'H', 'O'].filter(el => counts[el]).map(el => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return `${el}${counts[el] > 1 ? toSubscript(counts[el]) : ''}`;

Â  Â  Â  Â  Â  Â  Â  Â  }).join('');

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  if (counts.H === 2 && counts.O === 1 && component.length === 3) return 'Hâ‚‚O';

Â  Â  Â  Â  Â  Â  Â  Â  if (counts.C === 1 && counts.O === 2 && component.length === 3) return 'COâ‚‚';

Â  Â  Â  Â  Â  Â  Â  Â  if (counts.C === 1 && counts.H === 4 && component.length === 5) return 'CHâ‚„';

Â  Â  Â  Â  Â  Â  Â  Â  if (counts.O === 2 && component.length === 2) return 'Oâ‚‚';

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  return parts;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  // --- EVENT LISTENERS ---

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  function resizeCanvas() {

Â  Â  Â  Â  Â  Â  Â  Â  canvas.width = parentContainer.clientWidth;

Â  Â  Â  Â  Â  Â  Â  Â  canvas.height = parentContainer.clientHeight;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  window.addEventListener('resize', () => {

Â  Â  Â  Â  Â  Â  Â  Â  resizeCanvas();

Â  Â  Â  Â  Â  Â  });



Â  Â  Â  Â  Â  Â  tempSlider.addEventListener('input', (e) => {

Â  Â  Â  Â  Â  Â  Â  Â  temperature = parseInt(e.target.value);

Â  Â  Â  Â  Â  Â  Â  Â  tempValue.textContent = temperature;

Â  Â  Â  Â  Â  Â  });



Â  Â  Â  Â  Â  Â  pressureSlider.addEventListener('input', (e) => {

Â  Â  Â  Â  Â  Â  Â  Â  pressure = parseInt(e.target.value);

Â  Â  Â  Â  Â  Â  Â  Â  pressureValue.textContent = pressure;

Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  resetButton.addEventListener('click', () => {

Â  Â  Â  Â  Â  Â  Â  Â  loadingIndicator.style.display = 'flex';

Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(init, 50);

Â  Â  Â  Â  Â  Â  });



Â  Â  Â  Â  Â  Â  // Initial load

Â  Â  Â  Â  Â  Â  init();

Â  Â  Â  Â  });

Â  Â  </script>

</body>

</html>
